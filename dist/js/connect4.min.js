/**
 * Connect4 v1.0.0
 * This is a jQuery plugin of the board game: Connect-4
 *
 * @author      Christopher Viray
 * @copyright   (c) 2018 Christopher Viray
 * @license     MIT
 * @version     1.0.0
 */
(function(d){function u(){g=[];l=[];h=1;m=!1;for(var b=0;7>b;b++)for(var a=0;6>a;a++)void 0==g[b]&&(g[b]=[]),g[b][a]=0}function w(){var b=l.length;if(7<=b){b=l[b-1].player;for(var a,c,e,f=[[1,0],[0,1],[1,1],[1,-1]],k=0;k<f.length;k++)for(var h=0;7>h;h++)for(var m=0;6>=m;m++){a=[];for(var n=0;4>n;n++)try{if(c=h+n*f[k][0],e=m+n*f[k][1],g[c][e]==b){if(a.push({x:c,y:e}),4==a.length){for(var p=n=void 0,r=void 0,q=0;q<a.length;q++)p=a[q].x,n=a[q].y,r=d("#square_"+p+n),r.length&&t(r,g[p][n],!0);return b+
2}}else break}catch(A){break}}if(42==l.length)return 5}return!1}function v(){var b,a,c;d("button.square").each(function(){b=d(this);a=b.data("x");c=b.data("y");void 0!=a&&void 0!=c&&t(b,g[a][c],!1)})}function t(b,a,c){b.removeClass("red yellow winner");1==a?b.addClass("red"):2==a&&b.addClass("yellow");c&&b.addClass("winner")}function p(b){var a=d("#game_display");switch(b){case 1:a.text("Player Turn: Red");break;case 2:a.text("Player Turn: Yellow");break;case 3:a.text("Winner: Red!!!");break;case 4:a.text("Winner: Yellow!!!");
break;case 5:a.text("Game is a Draw!!!")}}function x(b){if(!m){b=d(b.currentTarget);var a=b.data("x"),c=b.data("y");if(void 0!=a&&void 0!=c){var e=!1;if(0==g[a][c])if(0==c)e=!0;else if(1==g[a][c-1]||2==g[a][c-1])e=!0;if(e){l.push({player:h,x:a,y:c});g[a][c]=h;t(b,h,!1);var f=l;b=h;a=d("#moves_list");c=d("<li>",{id:"move_"+f.length});e=d("<button>",{"class":"prev_move",text:"Go to Move #"+f.length});f=d.extend(!0,[],f);f.pop();e.data({list:f,player:b});e.on("click",y);c.append(e);a.append(c);b=w();
3==b||4==b||5==b?(m=!0,p(b)):(h=1==h?2:1,p(h))}}}}function z(b){u();v();p(h);d("#moves_list").empty()}function y(b){b=d(b.currentTarget);var a=b.data("list"),c=b.data("player");if(void 0!=a&&void 0!=c){var e=a.length+1;b=l.length;h=c;l=a;m=!1;for(a=0;7>a;a++)for(c=0;6>c;c++)g[a][c]=0;for(var f,k=0;k<l.length;k++)a=l[k].player,c=l[k].x,f=l[k].y,void 0!=c&&void 0!=f&&(g[c][f]=a);v();for(p(h);e<=b;e++)d("#move_"+e).remove()}}var g=[],l=[],h=1,m=!1;d.fn.connect4=function(b){u();if(void 0!=this&&0!=this.length){b=
d("<h1>",{"class":"game_title",text:"Connect-4"});var a=d("<div>",{"class":"game"});this.append(b).append(a);var c=d("<div>",{"class":"left_section"});b=d("<div>",{"class":"right_section"});a.append(c).append(b);a=d("<div>",{id:"game_display",text:2==h?"Player Turn: Yellow":"Player Turn: Red"});c.append(a);a=d("<div>",{"class":"game_board"});c.append(a);for(var e,f,k=0;6>k;k++){e=d("<div>",{"class":"row"});for(var g=0;7>g;g++)f=d("<button>",{id:"square_"+g+k,"class":"square"}),f.data({x:g,y:k}),f.on("click",
x),e.append(f);a.prepend(e)}a=d("<button>",{id:"restart",text:"Restart Game"});a.on("click",z);c.append(a);c=d("<div>",{"class":"game_info"});a=d("<div>",{"class":"list_title",text:"Moves List"});e=d("<ol>",{id:"moves_list"});c.append(a).append(e);b.append(c)}return this}})(jQuery);